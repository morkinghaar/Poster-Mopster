'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = forEachRoute;

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactRouter = require('react-router');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Call the given callback for each element in the given react-router <Route />.
 *
 * NOTE: Does not call render for each element, only get children from el.props.children
 *
 * @param route       The react-router <Route /> to traverse
 * @param mapFn       The function to call with each route, and its current path in the router
 * @param [currPath]  The path of the given route
 */
function forEachRoute(route, mapFn) {
  var currPath = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/';

  mapFn(route, currPath);

  _react2.default.Children.forEach(route.props.children, function (child) {
    if (!child) return;
    var nextPath = child.type === _reactRouter.IndexRoute ? currPath : child.props.path ? _path2.default.join(currPath, child.props.path) : currPath;

    forEachRoute(child, mapFn, nextPath);
  });
}